
 <!DOCTYPE HTML>
<html lang="zh_CN.UTF-8">
<head>
  <meta charset="UTF-8">
  
    <title>Mihenkii&#39;s tech blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="mihenkii">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="Mihenkii&#39;s tech blog">
<meta property="og:url" content="http://mihenkii.github.io/index.html">
<meta property="og:site_name" content="Mihenkii&#39;s tech blog">
<meta property="og:locale">
<meta property="article:author" content="mihenkii">
<meta name="twitter:card" content="summary">

    
    <link rel="alternative" href="/atom.xml" title="Mihenkii&#39;s tech blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/%02.css">
<link rel="stylesheet" href="/.css">

<meta name="generator" content="Hexo 5.4.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Mihenkii&#39;s tech blog" title="Mihenkii&#39;s tech blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Mihenkii&#39;s tech blog">Mihenkii&#39;s tech blog</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:mihenkii.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/07/16/number-is-prime/" title="number-is-prime" itemprop="url">number-is-prime</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2021-07-16T08:34:38.000Z" itemprop="datePublished"> Published 2021-07-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>如何判断一个数字是否是素数</p>
<h4 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h4><p>普通方法：从2..√n，如果n可以被整除， 那么n就不是素数</p>
<p>更高效方法:</p>
<blockquote>
<p>We can improve this method further. Observe that all primes greater than 3 are of the form 6k ± 1, where k is any integer greater than 0. This is because all integers can be expressed as (6k + i), where i = −1, 0, 1, 2, 3, or 4. Note that 2 divides (6k + 0), (6k + 2), and (6k + 4) and 3 divides (6k + 3). So, a more efficient method is to test whether n is divisible by 2 or 3, then to check through all numbers of the form 6k +-1. This is 3 times faster than testing all numbers up to √n.</p>
</blockquote>
<p>所有整数都可以用6k + i表示，其中i = -1, 0, 1, 2, 3, 4，其中6k + 0, 6k + 2, 6k + 4可以被2整除， 6k + 3 可以被3整除.<br>所以，素数一定是包含在 6k-1 或者 6k+1里</p>
<h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;stdbool.h&gt;</span><br><span class="line"></span><br><span class="line">bool is_prime(int n) &#123;</span><br><span class="line"></span><br><span class="line">    if(n &lt; 2) &#123;</span><br><span class="line">        printf(&quot;Input number must greater than 2 what we got is %d\n&quot;, n);</span><br><span class="line">        exit(-1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if(n == 2 || n == 3) &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if(n%2 == 0 || n %3 == 0) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    for (int i=5; i*i&lt;n; i+=6) &#123;</span><br><span class="line">        if(n % i == 0 || n % (i+2) == 0) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int n;</span><br><span class="line">    printf(&quot;please input a number: &quot;);</span><br><span class="line">    scanf(&quot;%d&quot;, &amp;n);</span><br><span class="line"></span><br><span class="line">    if (is_prime(n)) &#123;</span><br><span class="line">        printf(&quot;%d is prime number&quot;, n);</span><br><span class="line">        return 0;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        printf(&quot;%d is not prime number&quot;, n);</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/数据结构与算法/">数据结构与算法</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/07/15/webrtc-ios-video-orientation/" title="webrtc-ios-video-orientation" itemprop="url">webrtc-ios-video-orientation</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2021-07-15T07:32:03.000Z" itemprop="datePublished"> Published 2021-07-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>写了一个通过Webrtc加入视频会议的html页面，使用iPhone手机打开，发现摄像头采集的视频画面旋转了90度, 在视频会议里面人是横向的..<br>PC和Android都没有这个问题</p>
<p>iPhone -&gt; Janus -&gt; OWT</p>
<h2 id="原因分析"><a href="#原因分析" class="headerlink" title="原因分析"></a>原因分析</h2><ol>
<li>手机采集的视频就不是正向的</li>
<li>OWT服务端渲染时对视频进行了转向</li>
</ol>
<p>我这里手机采集到的是正向的，所以是服务端对视频进行了旋转.<br>在SDP协商里，通过<code>a=extmap:13 urn:3gpp:video-orientation</code> 控制视频旋转角度</p>
<p><strong>注意：每个人遇到的extmap:后面的数字可能不一样</strong></p>
<h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>判断是iPhone手机，就去掉SDP里面的CVO(Coordination of Video Orientation)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function iOS() &#123;</span><br><span class="line"> return [</span><br><span class="line">    &#x27;iPhone Simulator&#x27;,</span><br><span class="line">    &#x27;iPhone&#x27;</span><br><span class="line"> ].includes(navigator.platform)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function createdOffer(description) &#123;</span><br><span class="line">  if(iOS()) &#123;</span><br><span class="line">    var oldsdp = description[&quot;sdp&quot;];</span><br><span class="line">    var pattern=/a=extmap:13 urn:3gpp:video-orientation\r\n/gi;</span><br><span class="line">    var newsdp = oldsdp.replace(pattern,&quot;&quot;);</span><br><span class="line">    description[&quot;sdp&quot;]=newsdp;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>这个办法不是很好，会在真的有旋转画面需求的时候无法使用，在服务器合流的时候判断是否需要旋转应该更好一些。</p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/epubcn/article/details/101451547">https://blog.csdn.net/epubcn/article/details/101451547</a><br><a target="_blank" rel="noopener" href="https://docs.flashphoner.com/display/WCS52EN/WebRTC+stream+picture+rotation">https://docs.flashphoner.com/display/WCS52EN/WebRTC+stream+picture+rotation</a><br><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/9038625/detect-if-device-is-ios">https://stackoverflow.com/questions/9038625/detect-if-device-is-ios</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/webrtc-ios-video-orientation/">webrtc ios video orientation</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/07/15/ubuntu-vnc/" title="Ubuntu-VNC" itemprop="url">Ubuntu-VNC</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2021-07-15T02:21:05.000Z" itemprop="datePublished"> Published 2021-07-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>需要使用Easy Connect链接到某单位的VPN，公司电脑不允许安装VPN客户端，因此考虑在阿里云Ubuntu Server上安装VNC，本地Mac通过VNC链接到Ubuntu</p>
<h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><p>我这里直接使用root账号进行的操作，普通账号命令前面加上sudo</p>
<h4 id="安装桌面环境"><a href="#安装桌面环境" class="headerlink" title="安装桌面环境"></a>安装桌面环境</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install xfce4 xfce4-goodies</span><br><span class="line"></span><br><span class="line"># xdm 可能不需要安装</span><br><span class="line">apt install xdm</span><br></pre></td></tr></table></figure>

<h4 id="安装tightvncserver"><a href="#安装tightvncserver" class="headerlink" title="安装tightvncserver"></a>安装tightvncserver</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install tightvncserver</span><br><span class="line"># xrdp 也是一个远程桌面服务，支持usb，音频</span><br><span class="line">apt install xrdp</span><br></pre></td></tr></table></figure>

<h4 id="启动vncserver"><a href="#启动vncserver" class="headerlink" title="启动vncserver"></a>启动vncserver</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncserver</span><br></pre></td></tr></table></figure>
<p>此时会提示设置密码, 设置一个自己熟悉的密码，如果需要更改密码，可以使用vncpasswd命令</p>
<h2 id="配置vnc"><a href="#配置vnc" class="headerlink" title="配置vnc"></a>配置vnc</h2><p>需要配置VNC链接到哪个桌面环境<br>首先停掉当前的VNC实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncserver -kill :1</span><br></pre></td></tr></table></figure>
<p>备份原始配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv ~/.vnc/xstartup ~/.vnc/xstartup.bak</span><br></pre></td></tr></table></figure>
<p>编辑配置如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># cat ~/.vnc/xstartup</span><br><span class="line">#!/bin/sh</span><br><span class="line">unset SESSION_MANAGER</span><br><span class="line">unset DBUS_SESSION_BUS_ADDRESS</span><br><span class="line">startxfce4 &amp;</span><br></pre></td></tr></table></figure>

<p><strong>如果没有unset那两个变量，通过VNC链接到Ubuntu是灰屏</strong></p>
<h2 id="设置vnc安全链接"><a href="#设置vnc安全链接" class="headerlink" title="设置vnc安全链接"></a>设置vnc安全链接</h2><p>vnc默认没有使用加密通讯，需要使用SSH tunnel来建立安全链接</p>
<p>在你的Mac本地执行如下命令, Windows用户见“参考链接”里面的putty配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 这条命令需要一直运行</span><br><span class="line">ssh -L 59000:localhost:5901 -C -N -l root 47.199.13.30</span><br></pre></td></tr></table></figure>

<p>-L: 参数代表将我本地Mac的59000端口转发到目标机器(47.199.13.30)的IP：port上. 可以理解登录到目标机器以后，在目标机器上执行 localhost:5901<br>-C: 参数代表启用压缩传输<br>-N: 代表ssh只做端口转发，不会执行命令<br>-l: 代表login user</p>
<h2 id="链接VNC"><a href="#链接VNC" class="headerlink" title="链接VNC"></a>链接VNC</h2><p>在Mac上打开Finder，点击Go，选择Connect to Server<br>链接到本机的59000端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vnc://localhost:59000</span><br></pre></td></tr></table></figure>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ol>
<li>VNC安装成功以后，EasyConnect还是没有搞定，可能与xfce桌面环境有关系，建议使用Gnome </li>
<li>Ubuntu默认的浏览器无法使用，提供input/output error<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</span><br><span class="line">apt install ./google-chrome-stable_current_amd64.deb</span><br><span class="line"></span><br><span class="line"># 在设置里，找到Preferred Applications  -&gt; Web Browser -&gt; Other... 输入/usr/bin/google-chrome</span><br></pre></td></tr></table></figure></li>
<li>浏览器显示中文乱码<br>安装中文字库<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install ttf-wqy-zenhei</span><br><span class="line">apt-get install language-pack-zh-hans</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-20-04">https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-20-04</a><br><a target="_blank" rel="noopener" href="https://cat.pdx.edu/platforms/mac/remote-access/vnc-to-linux/">https://cat.pdx.edu/platforms/mac/remote-access/vnc-to-linux/</a><br><a target="_blank" rel="noopener" href="https://help.ubuntu.com/community/VNC/Servers">https://help.ubuntu.com/community/VNC/Servers</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/Ubuntu20-04-VNC/">Ubuntu20.04 VNC</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/06/16/docker-commmon-error/" title="docker-commmon-error" itemprop="url">docker-commmon-error</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2021-06-16T02:50:32.000Z" itemprop="datePublished"> Published 2021-06-16</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="1-docker-registiry-pull-Error-http-server-gave-HTTP-response-to-HTTPS-client"><a href="#1-docker-registiry-pull-Error-http-server-gave-HTTP-response-to-HTTPS-client" class="headerlink" title="1. docker registiry pull Error http: server gave HTTP response to HTTPS client"></a>1. docker registiry pull Error http: server gave HTTP response to HTTPS client</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull 192.168.0.10:5000/centos</span><br><span class="line">Error response from daemon: Get https://192.168.0.10:5000/v2/: http: server gave HTTP response to HTTPS client</span><br></pre></td></tr></table></figure>
<p>解决办法: 在daemon.json里面添加insecure-registries</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Mac ~/.docker/daemon.json </span><br><span class="line"># Centos: /etc/docker/daemon.json </span><br><span class="line"></span><br><span class="line">&#123;&quot;experimental&quot;:false,&quot;debug&quot;:true,&quot;insecure-registries&quot;:[&quot;192.168.0.10:5000&quot;]&#125;</span><br></pre></td></tr></table></figure>
<p>重启docker</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/06/07/docker-registry-delete-image/" title="docker_registry_delete_image" itemprop="url">docker_registry_delete_image</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2021-06-07T13:24:52.000Z" itemprop="datePublished"> Published 2021-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>自己搭建的docker registry， docker pull 报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filesystem layer verification failed for digest sha256:xxx</span><br></pre></td></tr></table></figure>

<h4 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h4><p>应该是镜像的某一层layer校验不通过，参考:<br><a target="_blank" rel="noopener" href="https://github.com/distribution/distribution/issues/2168">https://github.com/distribution/distribution/issues/2168</a></p>
<h4 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h4><p>删除镜像，重新上传一次镜像</p>
<h6 id="打开registry删除功能"><a href="#打开registry删除功能" class="headerlink" title="打开registry删除功能"></a>打开registry删除功能</h6><p>进入到registry容器里，打开delete配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker container exec -it registry sh</span><br><span class="line"></span><br><span class="line">vi /etc/docker/registry/config.yml</span><br><span class="line"></span><br><span class="line"># 添加以下配置</span><br><span class="line">storage:</span><br><span class="line">  delete:</span><br><span class="line">    enabled: true</span><br></pre></td></tr></table></figure>
<p>重启容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container restart registry</span><br></pre></td></tr></table></figure>

<h6 id="删除镜像"><a href="#删除镜像" class="headerlink" title="删除镜像"></a>删除镜像</h6><p>这里以 zcloud/calico:v3.8.2 举例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 查看镜像列表</span><br><span class="line">curl -XGET 10.38.4.212:5000/v2/_catalog</span><br><span class="line"># 查看镜像的tags</span><br><span class="line">curl -XGET 10.38.4.212:5000/v2/zcloud/calico/tags/list</span><br><span class="line"># 查看镜像详情</span><br><span class="line">curl -XGET 10.38.4.212:5000/v2/zcloud/calico/manifests/v3.8.2</span><br><span class="line"></span><br><span class="line"># 获取镜像digest</span><br><span class="line">curl --header &quot;Accept: application/vnd.docker.distribution.manifest.v2+json&quot; -I -X GET 10.38.4.212:5000/v2/zcloud/calico/manifests/v3.8.2</span><br><span class="line"></span><br><span class="line"># 删除镜像manifest</span><br><span class="line">curl -I -X DELETE http://registry-internal.adp.aliyuncs.com:5000/v2/zcloud/calico/manifests/sha256:106a5b6fe7da462a562949c44d83a6327fea91bac93da1b61263113e7504963a</span><br><span class="line"></span><br><span class="line"># 删除镜像文件</span><br><span class="line">docker exec registry bin/registry garbage-collect /etc/docker/registry/config.yml</span><br></pre></td></tr></table></figure>

<p>重启<br><code>docker container restart registry</code></p>
<p>** 如果此时重新push同名镜像， 要等几分钟才才能pull到 **</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/docker-delete-image/">docker-delete-image</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/06/07/hello-world/" title="Hello World" itemprop="url">Hello World</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2021-06-07T13:03:12.760Z" itemprop="datePublished"> Published 2021-06-07</time>
    
  </p>
</header>
    <div class="article-content">
        
        <blockquote>
<p>every progrommer had his “Hello World !” in mind, as list bellow, mine </p>
</blockquote>
<p>bash </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Hello World!&quot;</span></span><br></pre></td></tr></table></figure>

<p>java </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>C </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>python </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;Hello World&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>Welcome to <a target="_blank" rel="noopener" href="http://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="http://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="http://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="http://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="http://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="http://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="http://hexo.io/docs/deployment.html">Deployment</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/bash-java-c-python-Hello-World/">bash java c python Hello World</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2020/03/14/golang-struct-init/" title="golang strcut 初始化" itemprop="url">golang strcut 初始化</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2020-03-14T10:04:57.000Z" itemprop="datePublished"> Published 2020-03-14</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><blockquote>
<p>刚刚接触golang, 准备用golang gin mongodb写一个CRUD小Demo，把遇到的知识点记录下来, 给自己以后参考</p>
</blockquote>
<h4 id="定义Post-struct"><a href="#定义Post-struct" class="headerlink" title="定义Post struct"></a>定义Post struct</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># module/post.go</span><br><span class="line">type Post struct &#123;</span><br><span class="line">    ID       primitive.ObjectID `bson:&quot;_id,omitempty&quot; json:&quot;id,omitempty&quot;`</span><br><span class="line">    Title    string             `bson:&quot;title,omitempty&quot; json:&quot;title,omitempty&quot;`</span><br><span class="line">    Content  string             `bson:&quot;content,omitempty&quot; json:&quot;content,omitempty&quot;`</span><br><span class="line">    Type     int                `bson:&quot;type,omitempty&quot; json:&quot;type,omitempty&quot;`</span><br><span class="line">    Ctime    int64              `bson:&quot;ctime,omitempty&quot; json:&quot;ctime,omitempty&quot;`</span><br><span class="line">    Utime    int64              `bson:&quot;utime,omitempty&quot; json:&quot;utime,omitempty&quot;`</span><br><span class="line">    UserID   int                `bson:&quot;user_id,omitempty&quot; json:&quot;user_id,omitempty&quot;`</span><br><span class="line">    ReferURL string             `bson:&quot;refer_url,omitempty&quot; json:&quot;refer_url,omitempty&quot;`</span><br><span class="line">    Extra    string             `bson:&quot;extra,omitempty&quot; json:&quot;extra,omitempty&quot;`</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 方法一</span><br><span class="line">post := models.Post&#123;primitive.NewObjectID(), &quot;title&quot;, &quot;content&quot;, 1, time.Now().Unix(), time.Now().Unix(), 1, &quot;http://www.baidu.com&quot;, &quot;&quot;&#125;</span><br><span class="line">models.CreatePost(post)</span><br><span class="line"></span><br><span class="line"># 方法二</span><br><span class="line">var post models.Post</span><br><span class="line">post.ID = primitive.NewObjectID()</span><br><span class="line">post.Title = &quot;这是一个title4&quot;</span><br><span class="line">post.Content = &quot;这是content，有长度&quot;</span><br><span class="line">post.Type = 1</span><br><span class="line">post.Ctime = time.Now().Unix()</span><br><span class="line">post.Utime = time.Now().Unix()</span><br><span class="line">post.UserID = 1</span><br><span class="line">post.ReferURL = &quot;http://www.baidu.com&quot;</span><br><span class="line">post.Extra = &quot;&quot;</span><br><span class="line"></span><br><span class="line">models.CreatePost(post)</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/golang/">golang</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/07/29/bashrc_vs_bash_profile/" title="bashrc vs bash_profile" itemprop="url">bashrc vs bash_profile</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2018-07-29T13:04:57.000Z" itemprop="datePublished"> Published 2018-07-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><blockquote>
<p>使用Linux安装软件，有时候需要设置环境变量，有的文档建议设置在.bashrc里， 有的建议.bash_profile里<br>一般都能生效，那么区别是什么呢？</p>
</blockquote>
<h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><blockquote>
<p>.bash_profile is executed for login shells, while .bashrc is executed for interactive non-login shells.</p>
</blockquote>
<p>bash_profile: 登录试shell执行<br>bashrc: 非登录式shell执行</p>
<h4 id="什么是-非-登录试shell"><a href="#什么是-非-登录试shell" class="headerlink" title="什么是(非)登录试shell"></a>什么是(非)登录试shell</h4><p>登录试： 当你敲入用户名和密码登录的终端， 或通过ssh登录机器. .bash_profile会被调用<br>非登录: 当你已经登录了机器，在桌面环境打开终端， 或者在终端里面调用了/bin/bash, 此时.bashrc会被调用</p>
<h4 id="为什么会有这两个文件"><a href="#为什么会有这两个文件" class="headerlink" title="为什么会有这两个文件"></a>为什么会有这两个文件</h4><p>比如，你希望第一次登录机器的时候，想看到机器的负载， 那么把uptime命令写到.bash_profile里面就可以了.<br>如果写到.bashrc里面， 你每次打开终端， 都会看到机器负载。</p>
<h4 id="推荐方法"><a href="#推荐方法" class="headerlink" title="推荐方法"></a>推荐方法</h4><p>当你设置PATH环境变量的时候， 把变量写到.bashrc<br>在.bash_profile里面加载.bashrc</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ -f ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h4 id="参考连接"><a href="#参考连接" class="headerlink" title="参考连接"></a>参考连接</h4><p><a target="_blank" rel="noopener" href="http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html">bash_profile_vs</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/bashrc-bash-profile/">bashrc bash_profile</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/07/28/linux_history/" title="linux history 添加时间" itemprop="url">linux history 添加时间</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2018-07-28T13:04:57.000Z" itemprop="datePublished"> Published 2018-07-28</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><blockquote>
<p>在Linux上执行history命令默认不现实命令执行时间，对于问题排查不是很友好.<br>通过设置，可以在history命令前面加上命令执行时间</p>
</blockquote>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>bash</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HISTTIMEFORMAT=%Y-%m-%d %H:%M:%S</span><br><span class="line">HISTSIZE=1000 <span class="comment"># 历史命令数量</span></span><br></pre></td></tr></table></figure>

<p>zsh</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HIST_STAMPS=<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span></span><br><span class="line">HISTSIZE=50000</span><br></pre></td></tr></table></figure>

<p>加载配置</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bash</span></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment">#zsh</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">history</span><br><span class="line">1  2018-07-28 16:36:10  cd /opt/workspace</span><br><span class="line">2  2018-07-28 16:36:20  vim linux_history.md</span><br><span class="line">3  2018-07-28 16:36:33  env</span><br><span class="line">4  2018-07-28 16:36:40  vim linux_history.md</span><br><span class="line">5  2018-07-28 16:37:52  ls</span><br><span class="line">6  2018-07-28 16:37:56  hexo server</span><br><span class="line">7  2018-07-28 16:38:19  ls</span><br><span class="line">8  2018-07-28 16:38:21  vim linux_history.md</span><br><span class="line"></span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/linux-history-stamp/">linux history stamp</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/11/13/docker_config/" title="Docker配置" itemprop="url">Docker配置</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="mihenkii" target="_blank" itemprop="author">mihenkii</a>
		
  <p class="article-time">
    <time datetime="2017-11-13T14:04:57.000Z" itemprop="datePublished"> Published 2017-11-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h4><blockquote>
<p>配置docker registry 加速docker</p>
</blockquote>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/docker/daemon.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://registry.docker-cn.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启docker</span></span><br><span class="line">sudo systemctl restart docker</span><br><span class="line"><span class="comment"># 查看镜像是否加载，我本机没有加载成功</span></span><br><span class="line">sudo docker info</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">docker pull ubuntu:14.04</span><br><span class="line">docker image ls <span class="comment"># 查看本地镜像</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="启动实例"><a href="#启动实例" class="headerlink" title="启动实例"></a>启动实例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run ubuntu:14.04 # 如果本地没有这个image， 会从镜像仓库拉取并启动</span><br><span class="line">docker run -it ubuntu:14.04 /bin/bash  # 启动并进入到实例</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="退出实例"><a href="#退出实例" class="headerlink" title="退出实例"></a>退出实例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入exit 或者ctrl+d 都会退出实例</span><br><span class="line">如果想退出且不停止实例， 使用ctrl+p+q组合键退出</span><br></pre></td></tr></table></figure>

<h4 id="登录实例"><a href="#登录实例" class="headerlink" title="登录实例"></a>登录实例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker [container] exec -it $containerId /bin/bash # 新启动一个bash</span><br><span class="line">docker [container] attach $containerId  #登录到旧的tty</span><br></pre></td></tr></table></figure>

<h4 id="制作镜像"><a href="#制作镜像" class="headerlink" title="制作镜像"></a>制作镜像</h4><p>新建一个目录，创建 Dockerfile</p>
<p>docker build -t 镜像名 .<br>docker run -p4000:80 镜像名<br>docker tag 镜像名 用户名/repository:tag<br>docker login # 输入用户名不带邮箱后缀</p>
<p>docker push 用户名/repository:tag</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/docker-centos/">docker centos</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next&lt;span&gt;&lt;&#x2F;span&gt;</a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  

  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/gimp/" title="gimp">gimp<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/linux/" title="linux">linux<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/docker-centos/" title="docker centos">docker centos<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/bashrc-bash-profile/" title="bashrc bash_profile">bashrc bash_profile<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/docker-delete-image/" title="docker-delete-image">docker-delete-image<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/favicon/" title="favicon">favicon<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/golang/" title="golang">golang<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/github-blog-hexo-jekyll/" title="github blog hexo jekyll">github blog hexo jekyll<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/bash-java-c-python-Hello-World/" title="bash java c python Hello World">bash java c python Hello World<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/hexo-posts-pages/" title="hexo posts pages">hexo posts pages<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/pyenv-virtualenv/" title="pyenv virtualenv">pyenv virtualenv<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/linux-history-stamp/" title="linux history stamp">linux history stamp<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/gimp-GIMP-教程/" title="gimp GIMP 教程">gimp GIMP 教程<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/win7-centos7/" title="win7 centos7">win7 centos7<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Ubuntu20-04-VNC/" title="Ubuntu20.04 VNC">Ubuntu20.04 VNC<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/webrtc-ios-video-orientation/" title="webrtc ios video orientation">webrtc ios video orientation<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/数据结构与算法/" title="数据结构与算法">数据结构与算法<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="https://coderq.com" target="_blank" title="一个面向程序员交流分享的新一代社区">码农圈</a>
            
          </li>
        
          <li>
            
            	<a href="http://wuchong.me" target="_blank" title="Jark&#39;s Blog">Jark&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=&verifier=b3593ceb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Larry Page in Google. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2021 
		
		<a href="/about" target="_blank" title="mihenkii">mihenkii</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
